<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DaDraw</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #fff;
        }

        canvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }
    </style>
</head>
<body>
<canvas id="canvas"></canvas>
<script src="draw.js"></script>
<script>
    console.log('Script started');
    console.log('Draw function:', draw);

    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    console.log('Canvas context:', ctx);

    // Get device pixel ratio for retina screen support
    const dpr = window.devicePixelRatio || 1;

    // Размеры экрана (используй эти переменные для рисования)
    let width = window.innerWidth;
    let height = window.innerHeight;

    function resizeCanvas() {
        width = window.innerWidth;
        height = window.innerHeight;

        canvas.width = width * dpr;
        canvas.height = height * dpr;
        ctx.setTransform(1, 0, 0, 1, 0, 0); // reset any previous scale
        ctx.scale(dpr, dpr);
    }

    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    // ========================================
    // draw here - add your event listeners below for screen 1
    // ========================================

    // Handle click events
    canvas.addEventListener('click', (e) => {
        const rect = canvas.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        handleClick(x, y);
    });

    // ========================================
    // end of event listeners for screen 2
    // ========================================

    function loop(time) {
        draw(time, ctx, width, height);  // передаём время в функцию рисования
        requestAnimationFrame(loop);
    }

    // Запускаем!
    console.log('Starting animation loop');
    requestAnimationFrame(loop);
</script>
</body>
</html>